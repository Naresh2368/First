use strict;
use DBI;

&main();  # to call the main method

#Define main() method
sub main()      
{
    &initDB();  # To call the initDB() method
    &delete();  # To call the delete() method
    &cleanUpDb(); # To call the cleanUpDb() method
    
}
my $dbh;
# InitDB() method is used for to connect the database
sub initDB()
{
    
    # Get the mysql database connection 
     $dbh=DBI->connect('DBI:mysql:localdb','root','root123') or die "Could not Connect to the mysql database please check the crdentials".DBI->errstr;
    
}

    
#delete() is used for delete the data from the database
sub delete()
{

	#To Initialize the key and value pairs
	my %hash = ( EmpId  => 36);
	my $keystr = (join ",\n        ", (keys %hash));
	my $valstr = join ', ', (split(/ /, "? " x (scalar(values %hash))));
	my @values = values %hash;

	# delete statement
        my $query = qq`delete from employee  where $keystr=$valstr `;
        my $sth = $dbh->prepare($query) or die "Can't prepare delete: ".$dbh->errstr()."\n";
        	
        # execute the query
        $sth->execute(@values) or die "Can't execute delete: ".$dbh->errstr()."\n";
        print "Deleted one row into the data base \n";
        $sth->finish();
}
    
#cleanUpDb() method used for to close the db connection
sub cleanUpDb()
{
    
    if(defined $dbh)
    {	
	# close the connection
	$dbh->disconnect;
    }
    else
    {
	print"Connection closed";
     }
    

}	